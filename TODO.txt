TODO 24/09:
-Check input corretto																									X
	-se qualche input manca, metto un generico human genome ref, 0 0 0, 2 guide (quelle nel placeholder), NGG pam		X
	-se le guide sono errate (lunghezze diverse, + di mille), tengo valida la prima e scarto quelle non conformi		X
-Controllare se add-variants mi crea una cartella all'interno di SNP genomes, nel caso fare in modo che lo faccia		X
-PAM sinistra/destra																									X
	-in base alla pam scelta sul server, sistemo la cosa																X
-Da symlink a cp																										X
-Collegare annotazioni con i genomi esatti		X
-Sulla pagina load, fare il controllo subito così l'utente non aspetta i 3 secondi
-Implementare opzione aggiuntiva -gecko																					X
-Implementare opzione aggiuntiva barplot																				X <- check bug generate report
-Aggiungere pam corrette
	-5'-NGG-3'			X
	-Poi sistemare nella chiamata che deve essere uguale al file														X
-Sistemare menu			X
-Sistemare email		X
-Sistemare genomi, avere solo un elenco
-Non far partire l'indice e l'arricchimento, saranno già presenti sul server											X
-Aggiungere controllo guide per vedere se i res sono già stati fatti													X
-Bug nel generate report, se provo a fare barplot di un mms che ha 0 risultati mi da errore
(Traceback (most recent call last):
  File "/home/edirupo/.conda/envs/webapp/opt/crispritz/Python_Scripts/Plot/radar_chart.py", line 134, in <module>
    arraySummaryCountTwo[:, uppermm])/10), math.ceil(max(arraySummaryCountTwo[:, uppermm])/5))
ValueError: arange: cannot compute length
)
	-se y_range = 0 0 0, significa che non ci sono target con quei mms in ref e in enr, quindi creo plot con scritto no
	no result. Posso usare max tra y_range e 10 per evitare errore
	-testarlo se almeno enr o ref ha 1+ risultati, si, se entrambi sono 0 mi da errore									X
-Controllo se i risultati sono 0, inviare messaggio di errore/risultati 0												X
	-migliorare grafica dei risultati a 0 e risultati che non esistono più
	
26/09
-Sistemare barplot		X		(vedere radar_chart.py)
-Inserire Error nel load se non esiste il risultato			X
-Sul load, fare controllo subito per non aspettare 3 sec  -> forse non possibile
-Modificare stile warnings			X -> da vedere se va bene
-Modificare stile menu						X
	-Sistemare grandezza hover sui home, about,contacts		X -> va bene così
-Inserite title per spigazioni opzioni avanzate				X
	-Modificare allineamento checkbox						X
-Inserire spiegazione guide									X
-Inserire 'send us email or download offline'				X
	-Inserire link a contatti e download
-Modificare stile barplot quando non ho risultati			X
-Modificare la mail											X
	-Aggiungere paramtri alla mail
-Aggiungere tutte le pam									X
-Collegare annotazioni con genomi esatti					X
-Aumentare dimensioni checklist

-Creare docker con tutto

27/09
-Indice genomi con 25 e con 20 (lunghezza pam) mi da stessi risultati ma posizioni diverse di 5 nei res dei 20, controllo le posizioni coi res di cas offinder (secondo genoma)



docker build -t my_docker .
docker run -it my_docker [COMMAND]
docker run -p 8080:80 my_docker python3 app_simplified_bootstrap.py

30/09
-Inserire nota sotto select genome per specificare il vcf
	-Note: genomes with a + means variants
-Cambiare il contact us in due frasi allineate con 'contact us for genome availability' e 'If you want custom genome, vcf, mms bulges etc etc download offline version (con link)' X
-Togliere upload e mettere limite a 1000 guide			X
-Mettere la spiegazione delle adv opts come: Compare your results with gecko library e Compare your result with ref genome		X
-Inserire un avviso se input manca		X 
	- Inserire elenco input mancanti	X
-Testare docker e fare file per scaricare e sistemare i genomi
-Cambiare icona

-Pe crispritz: quando trovo un target che ha + di una variante, se sono varianti di persone diverse la scarto.
Alla fine per ogni targets trovato devo avere un elenco dei sample da dove sono arrivati e fare un istogramma dove indico, per ogni gruppo di sampl (1s, 2s, 3s) il numero di target trovati:
eg.  ci sono 1000 target che hanno 3 samples

-Quando faccio enrich genome, mi tengo i file .alt creati, o li modifico in modo da avere anche la lista di sample da dove arrivano
-Dopoche ho ottenuto i targets dalla ricerca, per ogni target controllo:
	-Se non ha iupac, non faccio nulla
	-Se ha 1 iupac, controllo sul file .alt, in base alla posizione (position + posizione dello iupac), a che sample appartengono e lo aggiungo ai vari sample1.txt, sample2.txt ... file
	-Se ha 1+ iupac, controllo il primo iupac a che sample appartengono (come sopra), poi faccio la stessa cosa col 2 iupac e così via. Faccio l'intersezione tra i vari gruppi
	di sample trovati e se il risultato non è vuoto, aggiungo quel sample nei sample.txt rimasti nell'intersezione.




---01/10
-Inserire una guida gìà come esempio
-Mettere 7 mms come massimo		X
-Inserire possibilità di mettere sequenze come crispor (con varianti!), oppure posizizioni sul genoma. Da questa sequenza estraggo la pam selezionata
e ottengo delle guide che poi vado a cercare su genoma enr.			
	-Aggiungere PAM inizio
	-Inserire controllo sugli input mancanti anche ai textbox e dropdown sulle sequenze			X
	-Inserire controllo correttezza input textbox e dropdown sequenze							X
-Senza cliccare su view vai direttamente alla pagina
-Result con 2 'pagine'
	-Ho il profiling completo: per ogni soglia di mms metto la somma dei profiling su tutte le guide in quella colonna <- non mi da molte info, non lo faccio
	-Una in cui seleziono la guida e ho il profiling di quella guida e le immagini
		-Mi copio la tabella del profiling sul sito			X
	-Vedere come funziona doench e cfd e mettere cfd e doench su on targets, solo cfd su off targets. (vedere crispor)
	-Se clicco su più info, compare la tabella completa di tutti gli offtargets (per quella guida), ordinate in base a (mm+bulge più basso),
	(priorità a offtargets sul gen enriched), (cfd e doench più alti -> cut efficiency più alta). Colorare con colori diversi gli offt se vengono da gen enr o ref
	-Per colorare, se un target ha una variante allora è del gen enr, se non le ha allora del gen ref --> controllare se i ref possono avere iupac
		-PROBLEMA: se nei targets ho uno IUPAC, 'perdo' l'informazione riguardo che lettera c'era in quel posto nel ref -> vedere se avere l'info del ref
		è importante (allora dobbiamo distinguere -> fare due ricerche su enr e ref) oppure no (fare singola ricerca e dividere in base a presenza iupac)
-Inserire link per scaricare tutti gli offt, lasciar gestire ad apache il tutto
-Inserire un riassunto dei parametri della ricerca
-CFD score in notazione scientifica

-Fare un group by per ogni posizione e vedere se i ref e il var è sempre lo stesso o cambia (potrei avere 2500 A G e il resto A T)
-Generare index genome NNN e 2 bulges su MV 

-Fare script per tagliare sequenze		X
-Fare in modo che clicco sulla guida e gli offt appaiono su una nuova scheda	X
-Doench solo per ont
-Colonna cfd per max e min value per quella guida, stessa cosa per doenc


-10/08
load example con impostazioni stardard 

area score  0-1 
cfd total
guide details

list of alll targets

-Ordinare le guide nella result page da meglio a peggio, mettere CFD globale e area score, mettere come crispor i mmismatches e area score per ogni mm value
Se clicco sulla guida, viene selezionata e sotto appare una tabella a 2 colonne con le immagini a sx il radarchart a dx il barplot (fare per ogni guida)
	-I file count sono così strutturati:				X fatto barplot per guida
		-GUIDA	num_targets_inExons_0mms	num_targets_inExons_1mms	num_targets_inExons_2mms ...
-differenziare target per ref o enr (2 ricerche intanto)
Seguire immagine di Luca per tabella targets
-Far vedere che guida è stata selezionata
-Bottone per esempio da far runnare
-Modificare bottone farlo bello

11-10
-Mettere bottone Insert/Delete vicino a step1
-Mettere bottone per avere le immagini con 1 mm, 2 mm, ...mms, e show all
-Mettere sotto focus on il link per vedere tutti i target di quella guida
-Filtering e ordinamento nella tabella delle guide
-Fare immagini più piccole e meglio sistemate

-Idea per estrarre only_enr: nella creazione dei res faccio un hash su guida+chr+pos e poi quando controllo nel enr vedo se il suo hash compare nella tabella già compilata e lo scarto
-Vedere java hash

-Scaricare bedfile, estrarre seq e creare cartelle per ogni bedfile. indicizzare, fare ricerca con le due guide 6 mm 2 2 

-Per velocizzare l'estrazione dei dati (comm, uniq, min_max), possiamo cambiare il nome dei chr quando creiamo il file dei targets cambiano carattteri come _ in - in modo
da poter usare LC_ALL=C